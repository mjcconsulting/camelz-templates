AWSTemplateFormatVersion: 2010-09-09
Description: MultiAccountRoles Template.
  This creates Multi-Account IAM Roles. These are not Application specific - Roles created here are for Multi-Account Access.
Metadata:
  AWS::CloudFormation::Interface:
    ParameterGroups:
      - Label:
          default: Stack Dependencies
        Parameters:
          - MultiAccountManagedPoliciesStackName
      - Label:
          default: Account Dependencies
        Parameters:
          - OrganizationAccountId
          - JumpstartAccountId
          - ManagementAccountId
          - CoreAccountId
          - LogAccountId
          - BuildAccountId
          - ProductionAccountId
          - NonProductionAccountId
          - RecoveryAccountId
          - StagingAccountId
          - UATAccountId
          - QAAccountId
          - TestingAccountId
          - DevelopmentAccountId
    ParameterLabels:
      MultiAccountManagedPoliciesStackName:
        default: Multi-Account ManagedPolicies Stack Name
      OrganizationAccountId:
        default: Organization Account ID
      JumpstartAccountId:
        default: Jumpstart Account ID
      ManagementAccountId:
        default: Management Account ID
      CoreAccountId:
        default: Core Account ID
      LogAccountId:
        default: Log Account ID
      BuildAccountId:
        default: Build Account ID
      ProductionAccountId:
        default: Production Account ID
      NonProductionAccountId:
        default: NonProduction Account ID
      RecoveryAccountId:
        default: Recovery Account ID
      StagingAccountId:
        default: Staging Account ID
      UATAccountId:
        default: UAT Account ID
      QAAccountId:
        default: QA Account ID
      TestingAccountId:
        default: Testing Account ID
      DevelopmentAccountId:
        default: Development Account ID
Parameters:
  MultiAccountManagedPoliciesStackName:
    Description: Name of the CloudFormation Stack containing Multi-Account ManagedPolicies
    Type: String
    MinLength: 2
    MaxLength: 64
    Default: MultiAccountManagedPolicies
    AllowedPattern: ^[A-Z][-a-zA-Z0-9]*$
    ConstraintDescription: must begin with an upper case letter and contain alphanumeric characters and dashes.
  OrganizationAccountId:
    Description: AWS Account ID of the Organization Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  JumpstartAccountId:
    Description: AWS Account ID of the Jumpstart Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  ManagementAccountId:
    Description: AWS Account ID of the Management Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  CoreAccountId:
    Description: AWS Account ID of the Core Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  LogAccountId:
    Description: AWS Account ID of the Log Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  BuildAccountId:
    Description: AWS Account ID of the Build Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  ProductionAccountId:
    Description: AWS Account ID of the Production Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  NonProductionAccountId:
    Description: AWS Account ID of the NonProduction Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  RecoveryAccountId:
    Description: AWS Account ID of the Recovery Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  StagingAccountId:
    Description: AWS Account ID of the Staging Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  UATAccountId:
    Description: AWS Account ID of the UAT Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  QAAccountId:
    Description: AWS Account ID of the QA Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  TestingAccountId:
    Description: AWS Account ID of the Testing Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
  DevelopmentAccountId:
    Description: AWS Account ID of the Development Account
    Type: String
    Default: ''
    AllowedPattern: (^$|^[0-9]{12}$)
    ConstraintDescription: must be a valid AWS Account ID, or blank.
Rules:
  ValidateRegion:
    Assertions:
      - Assert: !Equals [ !Ref 'AWS::Region', us-east-1 ]
        AssertDescription: This Template can only be used in Region us-east-1.
Conditions:
  ConfigureOrganizationRoles: !Equals [ !Ref OrganizationAccountId, !Ref 'AWS::AccountId' ]
  ConfigureOrganizationAccount: !Not [ !Equals [ !Ref OrganizationAccountId, '' ]]
  ConfigureOrganizationDomainNameServersRole: !And [ !Condition ConfigureOrganizationRoles, !Condition ConfigureJumpstartAccount ]
  ConfigureJumpstartRoles: !Equals [ !Ref JumpstartAccountId, !Ref 'AWS::AccountId' ]
  ConfigureJumpstartAccount: !Not [ !Equals [ !Ref JumpstartAccountId, '' ]]
  ConfigureManagementRoles: !Equals [ !Ref ManagementAccountId, !Ref 'AWS::AccountId' ]
  ConfigureManagementAccount: !Not [ !Equals [ !Ref ManagementAccountId, '' ]]
  ConfigureManagementDomainRoles: !And [ !Condition ConfigureManagementRoles, !Not [ !Condition ConfigureOrganizationAccount ]]
  ConfigureCoreRoles: !Equals [ !Ref CoreAccountId, !Ref 'AWS::AccountId' ]
  ConfigureCoreAccount: !Not [ !Equals [ !Ref CoreAccountId, '' ]]
  ConfigureLogRoles: !Equals [ !Ref LogAccountId, !Ref 'AWS::AccountId' ]
  ConfigureLogAccount: !Not [ !Equals [ !Ref LogAccountId, '' ]]
  ConfigureBuildRoles: !Equals [ !Ref BuildAccountId, !Ref 'AWS::AccountId' ]
  ConfigureBuildAccount: !Not [ !Equals [ !Ref BuildAccountId, '' ]]
  ConfigureProductionRoles: !Equals [ !Ref ProductionAccountId, !Ref 'AWS::AccountId' ]
  ConfigureProductionAccount: !Not [ !Equals [ !Ref ProductionAccountId, '' ]]
  ConfigureNonProductionRoles: !Equals [ !Ref NonProductionAccountId, !Ref 'AWS::AccountId' ]
  ConfigureNonProductionAccount: !Not [ !Equals [ !Ref NonProductionAccountId, '' ]]
  ConfigureRecoveryRoles: !Equals [ !Ref RecoveryAccountId, !Ref 'AWS::AccountId' ]
  ConfigureRecoveryAccount: !Not [ !Equals [ !Ref RecoveryAccountId, '' ]]
  ConfigureStagingRoles: !Equals [ !Ref StagingAccountId, !Ref 'AWS::AccountId' ]
  ConfigureStagingAccount: !Not [ !Equals [ !Ref StagingAccountId, '' ]]
  ConfigureUATRoles: !Equals [ !Ref UATAccountId, !Ref 'AWS::AccountId' ]
  ConfigureUATAccount: !Not [ !Equals [ !Ref UATAccountId, '' ]]
  ConfigureQARoles: !Equals [ !Ref QAAccountId, !Ref 'AWS::AccountId' ]
  ConfigureQAAccount: !Not [ !Equals [ !Ref QAAccountId, '' ]]
  ConfigureTestingRoles: !Equals [ !Ref TestingAccountId, !Ref 'AWS::AccountId' ]
  ConfigureTestingAccount: !Not [ !Equals [ !Ref TestingAccountId, '' ]]
  ConfigureDevelopmentRoles: !Equals [ !Ref DevelopmentAccountId, !Ref 'AWS::AccountId' ]
  ConfigureDevelopmentAccount: !Not [ !Equals [ !Ref DevelopmentAccountId, '' ]]
Resources:
  OrganizationAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureOrganizationRoles
  OrganizationAccountHostedZoneDelegationRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: HostedZoneDelegationProxyRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-HostedZoneDelegationProxyAccess
    Condition: ConfigureOrganizationRoles
  OrganizationAccountDomainNameServersRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: DomainNameServersProxyRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-DomainNameServersProxyAccess
    Condition: ConfigureOrganizationDomainNameServersRole
  JumpstartAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureJumpstartRoles
  ManagementAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureManagementRoles
  ManagementAccountHostedZoneDelegationRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: HostedZoneDelegationProxyRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-HostedZoneDelegationProxyAccess
    Condition: ConfigureManagementDomainRoles
  ManagementAccountDomainNameServersRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: DomainNameServersProxyRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureJumpstartAccount
                    - !Sub arn:aws:iam::${JumpstartAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-DomainNameServersProxyAccess
    Condition: ConfigureManagementDomainRoles
  CoreAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureCoreRoles
  CoreAccountVPCPeeringConnectionRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: VPCPeeringConnectionRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-VPCPeeringConnectionAccess
    Condition: ConfigureCoreRoles
  LogAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureLogRoles
  BuildAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureBuildRoles
  ProductionAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureProductionRoles
  NonProductionAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureNonProductionRoles
  RecoveryAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureProductionAccount
                    - !Sub arn:aws:iam::${ProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureNonProductionAccount
                    - !Sub arn:aws:iam::${NonProductionAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureStagingAccount
                    - !Sub arn:aws:iam::${StagingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureUATAccount
                    - !Sub arn:aws:iam::${UATAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureQAAccount
                    - !Sub arn:aws:iam::${QAAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureTestingAccount
                    - !Sub arn:aws:iam::${TestingAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureDevelopmentAccount
                    - !Sub arn:aws:iam::${DevelopmentAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureRecoveryRoles
  StagingAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureStagingRoles
  UATAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureUATRoles
  QAAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureQARoles
  TestingAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureTestingRoles
  DevelopmentAccountReferenceRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: ReferenceRole
      Path: /
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              AWS:
                - !If
                    - ConfigureOrganizationAccount
                    - !Sub arn:aws:iam::${OrganizationAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureManagementAccount
                    - !Sub arn:aws:iam::${ManagementAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureCoreAccount
                    - !Sub arn:aws:iam::${CoreAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureLogAccount
                    - !Sub arn:aws:iam::${LogAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureBuildAccount
                    - !Sub arn:aws:iam::${BuildAccountId}:root
                    - !Ref AWS::NoValue
                - !If
                    - ConfigureRecoveryAccount
                    - !Sub arn:aws:iam::${RecoveryAccountId}:root
                    - !Ref AWS::NoValue
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - !ImportValue
          Fn::Sub: ${MultiAccountManagedPoliciesStackName}-ReferenceAccess
    Condition: ConfigureDevelopmentRoles
Outputs:
  OrganizationAccountReferenceRole:
    Description: The OrganizationAccountReferenceRole Name
    Value: !Ref OrganizationAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-OrganizationAccountReferenceRole
    Condition: ConfigureOrganizationRoles
  OrganizationAccountHostedZoneDelegationRole:
    Description: The OrganizationAccountHostedZoneDelegationRole Name
    Value: !Ref OrganizationAccountHostedZoneDelegationRole
    Export:
      Name: !Sub ${AWS::StackName}-OrganizationAccountHostedZoneDelegationRole
    Condition: ConfigureOrganizationRoles
  OrganizationAccountDomainNameServersRole:
    Description: The OrganizationAccountDomainNameServersRole Name
    Value: !Ref OrganizationAccountDomainNameServersRole
    Export:
      Name: !Sub ${AWS::StackName}-OrganizationAccountDomainNameServersRole
    Condition: ConfigureOrganizationDomainNameServersRole
  JumpstartAccountReferenceRole:
    Description: The JumpstartAccountReferenceRole Name
    Value: !Ref JumpstartAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-JumpstartAccountReferenceRole
    Condition: ConfigureJumpstartRoles
  ManagementAccountReferenceRole:
    Description: The ManagementAccountReferenceRole Name
    Value: !Ref ManagementAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-ManagementAccountReferenceRole
    Condition: ConfigureManagementRoles
  ManagementAccountHostedZoneDelegationRole:
    Description: The ManagementAccountHostedZoneDelegationRole Name
    Value: !Ref ManagementAccountHostedZoneDelegationRole
    Export:
      Name: !Sub ${AWS::StackName}-ManagementAccountHostedZoneDelegationRole
    Condition: ConfigureManagementDomainRoles
  ManagementAccountDomainNameServersRole:
    Description: The ManagementAccountDomainNameServersRole Name
    Value: !Ref ManagementAccountDomainNameServersRole
    Export:
      Name: !Sub ${AWS::StackName}-ManagementAccountDomainNameServersRole
    Condition: ConfigureManagementDomainRoles
  CoreAccountReferenceRole:
    Description: The CoreAccountReferenceRole Name
    Value: !Ref CoreAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-CoreAccountReferenceRole
    Condition: ConfigureCoreRoles
  CoreAccountVPCPeeringConnectionRole:
    Description: The CoreAccountVPCPeeringConnectionRole Name
    Value: !Ref CoreAccountVPCPeeringConnectionRole
    Export:
      Name: !Sub ${AWS::StackName}-CoreAccountVPCPeeringConnectionRole
    Condition: ConfigureCoreRoles
  LogAccountReferenceRole:
    Description: The LogAccountReferenceRole Name
    Value: !Ref LogAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-LogAccountReferenceRole
    Condition: ConfigureLogRoles
  BuildAccountReferenceRole:
    Description: The BuildAccountReferenceRole Name
    Value: !Ref BuildAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-BuildAccountReferenceRole
    Condition: ConfigureBuildRoles
  ProductionAccountReferenceRole:
    Description: The ProductionAccountReferenceRole Name
    Value: !Ref ProductionAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-ProductionAccountReferenceRole
    Condition: ConfigureProductionRoles
  NonProductionAccountReferenceRole:
    Description: The NonProductionAccountReferenceRole Name
    Value: !Ref NonProductionAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-NonProductionAccountReferenceRole
    Condition: ConfigureNonProductionRoles
  RecoveryAccountReferenceRole:
    Description: The RecoveryAccountReferenceRole Name
    Value: !Ref RecoveryAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-RecoveryAccountReferenceRole
    Condition: ConfigureRecoveryRoles
  StagingAccountReferenceRole:
    Description: The StagingAccountReferenceRole Name
    Value: !Ref StagingAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-StagingAccountReferenceRole
    Condition: ConfigureStagingRoles
  UATAccountReferenceRole:
    Description: The UATAccountReferenceRole Name
    Value: !Ref UATAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-UATAccountReferenceRole
    Condition: ConfigureUATRoles
  QAAccountReferenceRole:
    Description: The QAAccountReferenceRole Name
    Value: !Ref QAAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-QAAccountReferenceRole
    Condition: ConfigureQARoles
  TestingAccountReferenceRole:
    Description: The TestingAccountReferenceRole Name
    Value: !Ref TestingAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-TestingAccountReferenceRole
    Condition: ConfigureTestingRoles
  DevelopmentAccountReferenceRole:
    Description: The DevelopmentAccountReferenceRole Name
    Value: !Ref DevelopmentAccountReferenceRole
    Export:
      Name: !Sub ${AWS::StackName}-DevelopmentAccountReferenceRole
    Condition: ConfigureDevelopmentRoles
